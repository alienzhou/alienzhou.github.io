<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>五、页面静态资源 | 🚵 前端性能优化之旅 🚀</title>
    <meta name="description" content="从用户发起访问开始到离开网站应用结束，完整地介绍其间前端性能优化的关注点与技术手段，帮助大家体系化得了解与学习前端性能优化相关知识">
    <link rel="icon" href="https://raw.githubusercontent.com/alienzhou/alienzhou.github.io/master/img/fe-performance-journey/favicon.png">
    
    <link rel="preload" href="/fe-performance-journey/assets/css/0.styles.f2fd3e2e.css" as="style"><link rel="preload" href="/fe-performance-journey/assets/js/app.bbcbb29d.js" as="script"><link rel="preload" href="/fe-performance-journey/assets/js/2.9f1bad84.js" as="script"><link rel="preload" href="/fe-performance-journey/assets/js/13.835d59be.js" as="script"><link rel="prefetch" href="/fe-performance-journey/assets/js/10.d9ab5109.js"><link rel="prefetch" href="/fe-performance-journey/assets/js/11.a5588735.js"><link rel="prefetch" href="/fe-performance-journey/assets/js/12.4ba8dd25.js"><link rel="prefetch" href="/fe-performance-journey/assets/js/14.1e281e5d.js"><link rel="prefetch" href="/fe-performance-journey/assets/js/15.28d9165f.js"><link rel="prefetch" href="/fe-performance-journey/assets/js/16.1946d869.js"><link rel="prefetch" href="/fe-performance-journey/assets/js/17.df7288a7.js"><link rel="prefetch" href="/fe-performance-journey/assets/js/18.84e0e210.js"><link rel="prefetch" href="/fe-performance-journey/assets/js/19.de18e3c5.js"><link rel="prefetch" href="/fe-performance-journey/assets/js/3.3980609c.js"><link rel="prefetch" href="/fe-performance-journey/assets/js/4.a116c96a.js"><link rel="prefetch" href="/fe-performance-journey/assets/js/5.a8052f04.js"><link rel="prefetch" href="/fe-performance-journey/assets/js/6.e4e36beb.js"><link rel="prefetch" href="/fe-performance-journey/assets/js/7.6d98271a.js"><link rel="prefetch" href="/fe-performance-journey/assets/js/8.d5b183ef.js"><link rel="prefetch" href="/fe-performance-journey/assets/js/9.75f218e3.js">
    <link rel="stylesheet" href="/fe-performance-journey/assets/css/0.styles.f2fd3e2e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fe-performance-journey/" class="home-link router-link-active"><!----> <span class="site-name">🚵 前端性能优化之旅 🚀</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/alienzhou/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://juejin.im/user/59ad5377518825244d206d2d/posts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/alienzhou/fe-performance-journey" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github, 欢迎 🌟
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/alienzhou/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://juejin.im/user/59ad5377518825244d206d2d/posts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/alienzhou/fe-performance-journey" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github, 欢迎 🌟
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/fe-performance-journey/" class="sidebar-link">启程</a></li><li><a href="/fe-performance-journey/1-cache/" class="sidebar-link">一、缓存</a></li><li><a href="/fe-performance-journey/2-request/" class="sidebar-link">二、发送请求</a></li><li><a href="/fe-performance-journey/3-response/" class="sidebar-link">三、服务端响应</a></li><li><a href="/fe-performance-journey/4-parse/" class="sidebar-link">四、页面解析与处理</a></li><li><section class="sidebar-group depth-0"><a href="/fe-performance-journey/5-subresources/" class="sidebar-heading clickable router-link-exact-active router-link-active active"><span>五、页面静态资源</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-performance-journey/5-subresources/javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/fe-performance-journey/5-subresources/css.html" class="sidebar-link">CSS</a></li><li><a href="/fe-performance-journey/5-subresources/image.html" class="sidebar-link">图片</a></li><li><a href="/fe-performance-journey/5-subresources/font.html" class="sidebar-link">字体</a></li><li><a href="/fe-performance-journey/5-subresources/video.html" class="sidebar-link">视频</a></li></ul></section></li><li><a href="/fe-performance-journey/6-runtime/" class="sidebar-link">六、运行时</a></li><li><a href="/fe-performance-journey/7-preload/" class="sidebar-link">七、预加载</a></li><li><a href="/fe-performance-journey/END.html" class="sidebar-link">尾声</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="五、页面静态资源"><a href="#五、页面静态资源" aria-hidden="true" class="header-anchor">#</a> 五、页面静态资源</h1> <p><a href="/fe-performance-journey/4-parse/">🔙 上一站 - 页面解析与处理</a></p> <p>在旅程的上一站中，我们介绍了基本的页面解析机制，通过对资源加载顺序和脚本加载的控制，避免了无谓的阻塞，优化了解析性能。</p> <p>也正如上一站中所说，这时浏览器除了解析页面 DOM 外，还会对页面包含的静态资源发起请求，请求回来后会执行或使用资源。这一站咱们就来具体看看这个阶段。</p> <p>首先还是从宏观上来了解一下：</p> <h2 id="_1-总体原则"><a href="#_1-总体原则" aria-hidden="true" class="header-anchor">#</a> 1. 总体原则</h2> <p>这一部分会涉及到各类常见的静态资源：JavaScript 脚本、CSS 样式表、图片、字体等。不同资源的优化措施既有联系又有差别，后续会以各类资源为维度，针对性介绍其优化的关注点和手段。</p> <p>但咱们还是要先从整体维度上进行一些分析。其实在总体原则上，各类资源的优化思路都是大体类似的，包括但不限于：</p> <ul><li>减少不必要的请求</li> <li>减少包体大小</li> <li>降低应用资源时的消耗</li> <li>利用缓存</li></ul> <p>为了大家能更好理解各类优化实施策略从何而来，先初步扩展一下以上的思路。</p> <h3 id="_1-1-减少不必要的请求"><a href="#_1-1-减少不必要的请求" aria-hidden="true" class="header-anchor">#</a> 1.1. 减少不必要的请求</h3> <p>核心是希望能够减少请求的数量，因为浏览器对同源请求有并发上限的限制（例如 Chrome 是6），所以在 HTTP/1.1 下，请求过多可能会导致请求被排队了。一个典型场景就是一些图库类型的网站，页面加载后可能需要请求十数张图片。</p> <p>同时，TCP/IP 的拥塞控制也使其传输有慢启动（slow start）的特点，连接刚建立时包体传输速率较低，后续会渐渐提速。因此，发送过多的“小”请求可能也不是一个很好的做法。</p> <p>减少不必要的请求主要分为几个维度：</p> <ul><li>对于不需要使用的内容，其实不需要请求，否则相当于做了无用功；</li> <li>对于可以延迟加载的内容，不必要现在就立刻加载，最好就在需要使用之前再加载；</li> <li>对于可以合并的资源，进行资源合并也是一种方法。</li></ul> <h3 id="_1-2-减少包体大小"><a href="#_1-2-减少包体大小" aria-hidden="true" class="header-anchor">#</a> 1.2. 减少包体大小</h3> <p>包体大小对性能也是有直接影响的。显然同样速率下，包体越小，传输耗时越低，整体页面加载与渲染的性能也会更好。</p> <p>减少包体大小常用的方式包括了：</p> <ul><li>使用适合当前资源的压缩技术；</li> <li>避免再响应包体里“塞入”一些不需要的内容。</li></ul> <h3 id="_1-3-降低应用资源时的消耗"><a href="#_1-3-降低应用资源时的消耗" aria-hidden="true" class="header-anchor">#</a> 1.3. 降低应用资源时的消耗</h3> <p>以上主要的关注点都在页面资源加载的效率，其实有些时候，浏览器去执行或使用资源的也是有消耗的。例如在 JavaScript 执行了一段 CPU 密集的计算，或者进行频繁的 DOM 操作，这些都会让 JavaScript 的执行变成影响性能的一大问题。虽然今天的像 V8 这样的引擎已经很快了，但是一些不当的操作仍然会带来性能的损耗。</p> <p>此外，像是 CSS 选择器匹配、图片的解析与处理等，都是要消耗 CPU 和内存的。也许这些不太常成为性能杀手，但是某些特性场合下，了解它们也许会对你有所帮助。</p> <h3 id="_1-4-利用缓存"><a href="#_1-4-利用缓存" aria-hidden="true" class="header-anchor">#</a> 1.4. 利用缓存</h3> <p>还记得咱们这趟旅程从哪出发的么？没错，缓存。</p> <p>在旅程的第一站，我们介绍了浏览器访问一个 url 时的多级缓存策略。千万不要忘了，这些静态子资源也是网络请求，它们仍然可以利用之前介绍的完整缓存流程。缓存在很多时候会是一个帮你解决性能问题的非常有效的手段。</p> <p>由于第一站已经对缓存进行了详细介绍，所以缓存这部分，在这一站里只会在针对资源类型再补充一些内容。</p> <h2 id="_2-针对各类资源的性能优化-🚀"><a href="#_2-针对各类资源的性能优化-🚀" aria-hidden="true" class="header-anchor">#</a> 2. 针对各类资源的性能优化 🚀</h2> <p>以上的原则可以指导我们针对性地优化各类资源。下面我就以资源类型为维度，详细介绍其中涉及到的优化点与优化措施。</p> <blockquote><p>如果你一口气读到这里，可能有些累了。不如先伸个懒腰放松下，整理回忆一下之前的内容。</p></blockquote> <p>如果准备好了，咱们就继续出发吧👇</p> <ul><li><a href="/fe-performance-journey/5-subresources/javascript.html">JavaScript 优化</a></li> <li><a href="/fe-performance-journey/5-subresources/css.html">CSS 优化</a></li> <li><a href="/fe-performance-journey/5-subresources/image.html">图片优化</a></li> <li><a href="/fe-performance-journey/5-subresources/font.html">字体优化</a></li> <li><a href="/fe-performance-journey/5-subresources/video.html">视频优化</a></li></ul> <p><img src="/fe-performance-journey/assets/img/break.77195f46.jpg" alt="break"></p> <hr> <h2 id="本节告一段落"><a href="#本节告一段落" aria-hidden="true" class="header-anchor">#</a> 本节告一段落</h2> <p>好了，如果你已经阅读完了上面各类资源的具体优化措施，那么恭喜，你已经在「前端性能优化之旅」上行过大半。下面我们会收拾行装继续回到主路上。</p> <p>下一站我们会来到“运行时”（runtime），看看有哪些性能优化的注意点与技术手段。</p> <p><a href="/fe-performance-journey/6-runtime/">下一站 - 运行时 🔜</a></p> <hr></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/alienzhou/fe-performance-journey/edit/master/5-subresources/README.md" target="_blank" rel="noopener noreferrer">欢迎斧正</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">更新于: </span> <span class="time">8/14/2019, 11:19:46 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/fe-performance-journey/assets/js/app.bbcbb29d.js" defer></script><script src="/fe-performance-journey/assets/js/2.9f1bad84.js" defer></script><script src="/fe-performance-journey/assets/js/13.835d59be.js" defer></script>
  </body>
</html>
